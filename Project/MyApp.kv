MDScreenManager:
    id: scr_manager
    LoginScreen:
        name: "LoginScreen"
    SignupScreen:
        name: "SignupScreen"
    HomeScreen:
        name: "HomeScreen"
    ProductDetail:
        name: "ProductDetail"
    ProfileScreen:
        name: "ProfileScreen"
    CartScreen:
        name: "CartScreen"


<LoginScreen>:
    MDScreen:
        MDFloatLayout:
            md_bg_color: "#e4ccb0"
            Image:
                source: "logo-clear.png"
                pos_hint: {"center_x":.22, "center_y": .85}
                size_hint: .5,.5
            MDLabel:
                text: "Welcome back!"
                color: "#6a5750"
                font_size: 40
                font_name: "Lora.ttf"
                pos_hint: {"center_x":.6, "center_y": .70}
            MDLabel:
                text: "Log in"
                bold: True
                color: "#210d02"
                font_size: 50
                font_name: "Lora.ttf"
                pos_hint: {"center_x":.6, "center_y": .63}

            MDFloatLayout:
                size_hint: .85,.08
                pos_hint: {"center_x":.52, "center_y": .48}

                MDLabel:
                    text: "Username"
#                    font_name: "Lora.ttf"
                    font_size: "12sp"
                    pos_hint: {"center_x": .5, "center_y": .95}
                    theme_text_color: "Custom"
                    text_color: "#6a5750"

                MDTextField:
                    id: username
                    font_name_helper_text: "Lora.ttf"
                    font_name: "Lora.ttf"
                    helper_text_color_normal: "#ad2923"
                    mode: "line"
                    helper_text: ""
                    helper_text_mode: "persistent"
                    size_hint_x: 0.9
                    pos_hint: {"center_x": .45, "center_y": .5}
                    foreground_color: "#210d02"
                    hint_text_color_focus: "#6a5750"
                    line_color_focus: "#6a5750"
                    icon_right: "account"

            MDFloatLayout:
                size_hint: .85,.08
                pos_hint: {"center_x":.52, "center_y": .35}

                MDLabel:
                    text: "Password"
#                    font_name: "Lora.ttf"
                    font_size: "12sp"
                    pos_hint: {"center_x": .5, "center_y": .95}
                    theme_text_color: "Custom"
                    text_color: "#6a5750"

                MDTextField:
                    id: password
                    font_name: "Lora.ttf"
                    helper_text_color_normal: "#ad2923"
                    helper_text: ""
                    helper_text_mode: "persistent"
                    mode: "line"
                    password: True
                    size_hint_x: 0.9
                    pos_hint: {"center_x": .45, "center_y": .5}
                    foreground_color: "#210d02"
                    hint_text_color_focus: "#6a5750"
                    line_color_focus: "#6a5750"
                    icon_right: "key"

            MDFlatButton:
                id: login_btn
                text: "[color=#f8e2ca]Log in[/color]"
                md_bg_color: "#8b5742"
                text_color: "#f8e2ca" #fsr this doesn't work?????
                font_name: "Lora.ttf"
                size_hint: .79, .08
                pos_hint: {"center_x": .48, "center_y": .21}
#                line_color: "#6a5750"
#                line_width: 2
                on_release: root.try_login()
            MDTextButton:
                text: "Don't have an account? Sign up here"
#                font_name: "Lora.ttf"
                font_size: "12sp"
                pos_hint: {"center_x": .48, "center_y": .12}
                halign: "center"
                on_press: root.switch_to_signup()


<SignupScreen>:
    MDScreen:
        MDFloatLayout:
            md_bg_color: "#e4ccb0"
            Image:
                source: "logo-clear.png"
                pos_hint: {"center_x":.22, "center_y": .87}
                size_hint: .5,.5
            MDLabel:
                text: "Hello there!"
                color: "#6a5750"
                font_size: 30
                font_name: "Lora.ttf"
                pos_hint: {"center_x":.6, "center_y": .77}
            MDLabel:
                text: "Sign up"
                bold: True
                color: "#210d02"
                font_size: 40
                font_name: "Lora.ttf"
                pos_hint: {"center_x":.6, "center_y": .72}

            MDFloatLayout:
                size_hint: .85,.08
                pos_hint: {"center_x":.52, "center_y": .60}

                MDLabel:
                    text: "Username"
#                    font_name: "Lora.ttf"
                    font_size: "10sp"
                    pos_hint: {"center_x": .5, "center_y": .95}
                    theme_text_color: "Custom"
                    text_color: "#6a5750"

                MDTextField:
                    id: signup_name
#                    font_name: "Lora.ttf"
                    mode: "line"
                    helper_text: ""
                    helper_text_mode: "persistent"
                    helper_text_color_normal: "#ad2923"
                    size_hint_x: 0.9
                    pos_hint: {"center_x": .45, "center_y": .5}
                    foreground_color: "#210d02"
                    hint_text_color_focus: "#6a5750"
                    line_color_focus: "#6a5750"
                    icon_right: "account"

            MDFloatLayout:
                size_hint: .85,.08
                pos_hint: {"center_x":.52, "center_y": .50}

                MDLabel:
                    text: "Email"
#                    font_name: "Lora.ttf"
                    font_size: "10sp"
                    pos_hint: {"center_x": .5, "center_y": .95}
                    theme_text_color: "Custom"
                    text_color: "#6a5750"

                MDTextField:
                    id: signup_email
#                    font_name: "Lora.ttf"
                    mode: "line"
                    helper_text: ""
                    helper_text_mode: "persistent"
                    helper_text_color_normal: "#ad2923"
                    size_hint_x: 0.9
                    pos_hint: {"center_x": .45, "center_y": .5}
                    foreground_color: "#210d02"
                    hint_text_color_focus: "#6a5750"
                    line_color_focus: "#6a5750"
                    icon_right: "email"

            MDFloatLayout:
                size_hint: .85,.08
                pos_hint: {"center_x":.52, "center_y": .40}

                MDLabel:
                    text: "Create Password"
#                    font_name: "Lora.ttf"
                    font_size: "10sp"
                    pos_hint: {"center_x": .5, "center_y": .95}
                    theme_text_color: "Custom"
                    text_color: "#6a5750"

                MDTextField:
                    id: pw1
#                    font_name: "Lora.ttf"
                    helper_text: ""
                    helper_text_mode: "persistent"
                    helper_text_color_normal: "#ad2923"
                    mode: "line"
                    password: True
                    size_hint_x: 0.9
                    pos_hint: {"center_x": .45, "center_y": .5}
                    foreground_color: "#210d02"
                    hint_text_color_focus: "#6a5750"
                    line_color_focus: "#6a5750"
                    icon_right: "key"

            MDFloatLayout:
                size_hint: .85,.08
                pos_hint: {"center_x":.52, "center_y": .30}

                MDLabel:
                    text: "Password confirmation"
#                    font_name: "Lora.ttf"
                    font_size: "10sp"
                    pos_hint: {"center_x": .5, "center_y": .95}
                    theme_text_color: "Custom"
                    text_color: "#6a5750"

                MDTextField:
                    id: pw2
#                    font_name: "Lora.ttf"
                    helper_text: ""
                    helper_text_mode: "persistent"
                    helper_text_color_normal: "#ad2923"
                    mode: "line"
                    password: True
                    size_hint_x: 0.9
                    pos_hint: {"center_x": .45, "center_y": .5}
                    foreground_color: "#210d02"
                    hint_text_color_focus: "#6a5750"
                    line_color_focus: "#6a5750"
                    icon_right: "lock"

            MDFlatButton:
                text: "[color=#f8e2ca]Sign up[/color]"
                md_bg_color: "#8b5742"
                text_color: "#f8e2ca" #fsr this doesn't work?????
                font_name: "Lora.ttf"
                size_hint: .79, .08
                pos_hint: {"center_x": .48, "center_y": .18}
#                on_release: root.try_register()
                on_release: root.try_register()

            MDTextButton:
                text: "Already has an account? Log in here"
#                font_name: "Lora.ttf"
                font_size: "12sp"
                pos_hint: {"center_x": .48, "center_y": .09}
                halign: "center"
                on_press: root.switch_to_login()


<HomeScreen>:
    MDBoxLayout:
        padding: 30
        spacing: 10
        orientation: "vertical"
        md_bg_color: "#e2c8ad"
        MDBoxLayout:
            size_hint_y: 0.3
            md_bg_color: "#e2c8ad"
            AnchorLayout:
                anchor_y: "top"
                anchor_x: "center"
                FitImage:
                    source: "logo-clear.png"
                    size_hint_y: 0.9
                    size_hint_x: 0.8



        ScrollView:
            MDGridLayout:
                cols: 2
                spacing: 40
                padding: 5
                size_hint_y: None
                height: self.minimum_height
                adaptive_height: True
                ProductCard:
                    prd_id: "cake"
                    image: "products/cake.png"
                    price: "325¥"
                    p_name: "Taiwanese Style Cake"

                ProductCard:
                    prd_id: "mochi"
                    image: "products/mochi.png"
                    price: "565¥"
                    p_name: "Peanut Mochi"

                ProductCard:
                    prd_id: "pho"
                    image: "products/pho.png"
                    price: "260¥"
                    p_name: "Instant Pho Beef Flavor"

                ProductCard:
                    prd_id: "laoganma"
                    image: "products/laoganma.png"
                    price: "795¥"
                    p_name: "Lao Gan Ma Chili Oil"


                ProductCard:
                    prd_id: "shinramyun"
                    image: "products/shinramyun.png"
                    price: "260¥"
                    p_name: "Shin Ramyun (spicy)"

                ProductCard:
                    prd_id: "ricecake"
                    image: "products/ricecake.png"
                    price: "860¥"
                    p_name: "Tteokbokki Rice Cake"



                ProductCard:
                    prd_id: "cracker"
                    image: "products/cracker.png"
                    price: "565¥"
                    p_name: "Cracker Fita"

                ProductCard:
                    prd_id: "pudding"
                    image: "products/pudding.png"
                    price: "795¥"
                    p_name: "Lychee Pudding"


        MDBoxLayout:
            size_hint_y: None
            md_bg_color: "#e2c8ad"
            height: 80
            padding: [0,0,9,2]
            spacing: 50
            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "home"

                    theme_text_color: "Custom"
                    text_color: app.theme_cls.primary_color

                MDLabel:
                    text: "Home"
                    valign: "center"
                    halign: "center"
                    theme_text_color: "Custom"
                    font_size: 20
                    text_color: app.theme_cls.primary_color
            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "cart"
                    color: "#392a25"
                    on_release: app.root.current = "CartScreen"
                MDLabel:
                    text: "Cart"
                    valign: "center"
                    halign: "center"
                    font_size: 20
                    text_color: "#392a25"
            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "account"
                    color: "#392a25"
                    on_release: app.root.current = "ProfileScreen"
                MDLabel:
                    text: "Profile"
                    valign: "center"
                    halign: "center"
                    font_size: 20
                    text_color: "#392a25"


<ProductCard@MDCard>:
    image: ""
    p_name: ""
    price: ""
    prd_id: ""
    padding: 10
    orientation: "vertical"
    size_hint_x: .5
    on_release: app.root.get_screen("HomeScreen").goto_product(root.image,root.p_name,root.price, root.prd_id)
    size_hint_y: None
    height: 240
    md_bg_color: "#f8e2ca"

    canvas.before:
        Color:
            rgba: (0.414, 0.340, 0.313, 1)  #rgba of #6a5750 (i'm rly glad i made the chrome extension)
        Line:
            width: 3
            rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    

    BoxLayout:
        orientation: "vertical"
        size_hint_y: 0.55
        Image:
            source: root.image
            size_hint_y: 1
    BoxLayout:
        size_hint_y: 0.1
    BoxLayout:
        orientation: "vertical"
        size_hint_y: 0.35
        padding: 5
        spacing: 2

        MDLabel:
            text_color: "#6a5750"
            font_name: "Lora.ttf"
            text: root.p_name
            font_size: "14sp"
            size_hint_y: None
            height: self.texture_size[1]

        MDLabel:
            text_color: "#6a5750"
            text: root.price
            font_size: "10sp"
            size_hint_y: None
            height: self.texture_size[1]


<ProductCardDeactivated@MDCard>:
    image: ""
    p_name: ""
    price: ""
    prd_id: ""
#    padding: 10
    orientation: "horizontal"
    size_hint_x: .5
    halign: "center"
    size_hint_y: None
#    height: 240
    padding_x: 20
    md_bg_color: "#f8e2ca"

    canvas.before:
        Color:
            rgba: (0.415, 0.341, 0.314, 1)  # RGBA for #6a5750
        Line:
            width: 3
            rounded_rectangle: (self.x, self.y, self.width, self.height, 30)



    BoxLayout:
        orientation: "vertical"
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        size_hint_y: 0.6
        size_hint_x: 1.2
        halign: "center"
        Image:
            source: root.image

            size_hint_y: 1
    BoxLayout:
        orientation: "vertical"
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        size_hint_y: 0.35
        padding: 5
        spacing: 2

        MDLabel:
            text_color: "#6a5750"
            font_name: "Lora.ttf"
            text: root.p_name
            font_size: "20sp"
            size_hint_y: None
            height: self.texture_size[1]

        MDLabel:
            text_color: "#6a5750"
            text: root.price
            font_size: "16sp"
            size_hint_y: None
            height: self.texture_size[1]


<ProductDetail>:
    MDBoxLayout:
        padding: 30
        spacing: 10
        orientation: "vertical"
        md_bg_color: "#e2c8ad"
        MDBoxLayout:
            size_hint_y: 0.2
            md_bg_color: "#e2c8ad"
            Image:
                source: "logo-clear.png"
                pos_hint: {"center_x": 0.5, "center_y": 0.4}
                size_hint_y: 3
                size_hint_x: 3
        MDBoxLayout:
            orientation: "vertical"
            halign: "center"
            spacing: 10
            padding: 50

            ProductCardDeactivated:
                size_hint: None, None
                size: 560, 300
                image: root.image
                p_name: root.p_name
                price: root.price
                prd_id: root.prd_id

            MDBoxLayout:
                size_hint_y: 0.5
            MDLabel:
                id: ingredients
                pos_hint: {"center_x":.51}
                text: "Ingredients: - "
                font_size: 20
                text_color: "#392a25"

            MDBoxLayout:
                size_hint_y: 0.5

            MDLabel:
                id: allergens
                pos_hint: {"center_x":.51}
                text: "Allergens: - "
                font_size: 20
                text_color: "#392a25"

            MDLabel:
                id: restrictions
                pos_hint: {"center_x":.51}
                text: "Dietary Restrictions: - "
                font_size: 20
                text_color: "#392a25"

            MDLabel:
                id: country
                pos_hint: {"center_x":.51}
                text: "Country of Origin: - "
                font_size: 20
                text_color: "#392a25"

            MDBoxLayout:
                size_hint_y: 0.1

            MDFlatButton:
                text: "[color=#8b5742]Back[/color]"
                size_hint_x: 1
                size_hint_y: None
                font_name: "Lora.ttf"
                height: 35
                md_bg_color: "#e2c8ad"
                line_color: "#8b5742"
                line_width: 2
                on_release:
                    app.root.current = "HomeScreen"

            MDFlatButton:
                text: "[color=#f8e2ca]Add to your cart[/color]"
                size_hint_x: 1
                size_hint_y: None
                font_name: "Lora.ttf"
                height: 35
                md_bg_color: "#8b5742"
                on_release: app.root.get_screen("ProductDetail").add_to_cart()


<CartScreen>:
    MDBoxLayout:
        padding: 30
        spacing: 10
        orientation: "vertical"
        md_bg_color: "#e2c8ad"
        MDBoxLayout:
            size_hint_y: 0.21
            md_bg_color: "#e2c8ad"
            Image:
                source: "logo-clear.png"
                pos_hint: {"center_x": 0.5, "center_y": 0.4}
                size_hint_y: 3
                size_hint_x: 2.8
        MDFloatLayout:
            md_bg_color: "#e2c8ad"

            MDLabel:
                text: "Shopping Cart"
                font_size: 50
                font_name: "Lora.ttf"
                bold: True
                halign: "center"
                pos_hint: {"center_x": .5, "center_y": .9}
                theme_text_color: "Custom"
                text_color: "#210d02"

            ScrollView:
                size_hint: 0.8, 0.55
                pos_hint: {"center_x": 0.5, "center_y": 0.5}

                MDList:
                    id: cart_items


            MDSeparator:
                height: "2dp"
                pos_hint: {"center_x": 0.5, "center_y": 0.2}
                color: "#6a5750"
                size_hint_x: .8

            MDLabel:
                id: total_price
                text: "Total: ¥0"
                font_size: 30
#                font_name: "Lora.ttf"

                halign: "center"
                pos_hint: {"center_x": .5, "center_y": .15}
                theme_text_color: "Custom"
                text_color: "#210d02"

            MDBoxLayout:
                size_hint_y: 0.2

            MDFlatButton:
                text: "[color=#f8e2ca]Confirm[/color]"
                md_bg_color: "#8b5742"
                size_hint: .79, .08
                font_name: "Lora.ttf"
                pos_hint: {"center_x": .5, "center_y": .05}
                on_release: root.confirm()

            MDBoxLayout:
                size_hint_y: 0.2

        MDBoxLayout:
            size_hint_y: None
            md_bg_color: "#e2c8ad"
            height: 80
            padding: [0,0,9,2]
            spacing: 50
            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "home"
                    on_release: app.root.current = "HomeScreen"


                MDLabel:
                    text: "Home"
                    valign: "center"
                    halign: "center"
                    theme_text_color: "Custom"
                    font_size: 20
                    text_color: "#392a25"
            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "cart"
                    color: "#392a25"
                    theme_text_color: "Custom"
                    text_color: "#8b5742"

                MDLabel:
                    text: "Cart"
                    valign: "center"
                    halign: "center"
                    font_size: 20
                    text_color: "#8b5742"

            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "account"
                    color: "#392a25"
                    on_release: app.root.current = "ProfileScreen"
                MDLabel:
                    text: "Profile"
                    valign: "center"
                    halign: "center"
                    font_size: 20
                    text_color: "#392a25"


<ProfileScreen>
    MDBoxLayout:
        padding: 30
        spacing: 10
        orientation: "vertical"
        md_bg_color: "#e2c8ad"
        MDBoxLayout:
            size_hint_y: 0.15
            md_bg_color: "#e2c8ad"
            AnchorLayout:
                anchor_y: "top"
                anchor_x: "center"
                FitImage:
                    source: "logo-clear.png"
                    size_hint_y: 0.9
                    size_hint_x: 0.8

        MDBoxLayout:
            orientation: "vertical"
            spacing: 10
            padding: 60
            md_bg_color: "#e2c8ad"
            halign: "center"
            size_hint_y: 0.5
            pos_hint: {"center_x": 0.5, "center_y": 0.9}


            FloatLayout:
                pos_hint: {"center_x": 0.5, "center_y": 0.9}
                canvas:
                    Color:
                        rgb: 1, 1, 1
                    Ellipse:
                        pos: 200, 500
                        size: 300 , 300
                        source: 'profile.jpeg'
                        angle_start: 0
                        angle_end: 360


            MDLabel:
                id: username_label
                text: "Hello there,"
                halign: "center"
                color: "#210d02"
                font_name: "Lora.ttf"
                pos_hint: {"center_x": 0.5, "center_y": 0.8}
                font_size: 50


            MDFlatButton:
                text: "[color=#f8e2ca]Log Out[/color]"
                size_hint_x: 1
                pos_hint: {"center_x": 0.5, "center_y": 0.6}
                size_hint_y: None
                font_name: "Lora.ttf"
                height: 35
                md_bg_color: "#8b5742"
                on_release: app.root.current = "LoginScreen"

            MDBoxLayout:
                size_hint_y: 0.2
                md_bg_color: "#e2c8ad"



        MDBoxLayout:
            size_hint_y: None
            md_bg_color: "#e2c8ad"
            height: 80
            padding: [0,0,9,2]
            spacing: 50
            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "home"
                    on_release: app.root.current = "HomeScreen"

                MDLabel:
                    text: "Home"
                    valign: "center"
                    halign: "center"
                    font_size: 20

            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "cart"
                    color: "#392a25"
                    on_release: app.root.current = "CartScreen"
                MDLabel:
                    text: "Cart"
                    valign: "center"
                    halign: "center"
                    font_size: 20
                    text_color: "#392a25"
            MDBoxLayout:
                orientation: "vertical"
                MDIconButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    icon: "account"
                    color: "#392a25"
                    theme_text_color: "Custom"
                    text_color: app.theme_cls.primary_color

                MDLabel:
                    text: "Profile"
                    valign: "center"
                    halign: "center"
                    font_size: 20
                    text_color: "#392a25"
                    text_color: app.theme_cls.primary_color
                    theme_text_color: "Custom"

